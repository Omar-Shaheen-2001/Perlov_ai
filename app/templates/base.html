<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PERLOV{% endblock %} - Ù…Ù†ØµØ© Ù…Ø­Ø¨ÙŠ Ø§Ù„Ø¹Ø·ÙˆØ±</title>
    
    <!-- Meta Tags -->
    {% block meta_tags %}
    <meta name="description" content="Ù…Ù†ØµØ© Ø¹Ø·ÙˆØ± Ø°ÙƒÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø´Ø®ØµÙŠØªÙƒ Ø§Ù„Ø¹Ø·Ø±ÙŠØ© ÙˆØªÙˆØµÙŠØ§Øª Ø¹Ø·ÙˆØ± Ù…Ø®ØµØµØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">
    <meta name="keywords" content="Ø¹Ø·ÙˆØ±, ØªØ­Ù„ÙŠÙ„ Ø¹Ø·ÙˆØ±, ØªÙˆØµÙŠØ§Øª Ø¹Ø·ÙˆØ±, Ø¹Ø·ÙˆØ± ÙØ§Ø®Ø±Ø©, Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ø¹Ø·Ø±ÙŠØ©">
    <meta name="author" content="PERLOV">
    <meta property="og:title" content="{% block og_title %}PERLOV - Ù…Ù†ØµØ© ØªØ­Ù„ÙŠÙ„ ÙˆØªÙˆØµÙŠØ§Øª Ø¹Ø·ÙˆØ± Ø°ÙƒÙŠØ©{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Ø§ÙƒØªØ´Ù Ø¹Ø·Ø±Ùƒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ­Ù„ÙŠÙ„ DNA Ø¹Ø·Ø±ÙŠ Ù…ØªÙ‚Ø¯Ù… ÙˆØªÙˆØµÙŠØ§Øª Ù…Ø®ØµØµØ©{% endblock %}">
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:image" content="{% block og_image %}{{ url_for('static', filename='images/logo-white.png', _external=True) }}{% endblock %}">
    <link rel="canonical" href="{{ request.url }}" />
    {% endblock %}
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body style="zoom: 90%; transform-origin: top center;">
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top navbar-luxury">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('main.index') }}" style="display: flex; align-items: center;">
                <img src="{{ url_for('static', filename='images/logo-white.png') }}" alt="PERLOV" style="height: 45px; width: auto; object-fit: contain;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.index') }}">
                            <i class="bi bi-house-door"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.about') }}">
                            <i class="bi bi-info-circle"></i> Ù…Ù† Ù†Ø­Ù†
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.modules') }}">
                            <i class="bi bi-grid-3x3-gap"></i> Ø§Ù„Ø®Ø¯Ù…Ø§Øª
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('recommendations.index') }}">
                            <i class="bi bi-stars"></i> Ø§Ù„ØªÙˆØµÙŠØ§Øª
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('marketplace.affiliate_products') }}">
                            <i class="bi bi-shop"></i> Ø§Ù„Ù…ØªØ¬Ø±
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('articles.index') }}">
                            <i class="bi bi-newspaper"></i> Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <!-- Language Selector -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-globe"></i> <span id="current-lang">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end language-dropdown" aria-labelledby="languageDropdown">
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('ar'); return false;">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('en'); return false;">ğŸ‡¬ğŸ‡§ English</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('hi'); return false;">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('fa'); return false;">ğŸ‡®ğŸ‡· ÙØ§Ø±Ø³ÛŒ</a></li>
                        </ul>
                    </li>

                    {% if current_user.is_authenticated and current_user.is_admin %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('admin.dashboard') }}" title="Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
                            <i class="bi bi-shield-lock"></i>
                        </a>
                    </li>
                    {% endif %}
                    {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('dashboard.index') }}">
                            <i class="bi bi-person-circle"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('auth.logout') }}">
                            <i class="bi bi-box-arrow-right"></i> Ø®Ø±ÙˆØ¬
                        </a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('auth.login') }}">
                            <i class="bi bi-box-arrow-in-left"></i> Ø¯Ø®ÙˆÙ„
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-rose btn-sm text-white ms-2" href="{{ url_for('auth.register') }}">
                            <i class="bi bi-person-plus"></i> ØªØ³Ø¬ÙŠÙ„
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3">
        {% for category, message in messages %}
        <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="footer-luxury">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5><i class="bi bi-droplet-fill text-rose"></i> PERLOV</h5>
                    <p class="footer-text">Ù…Ù†ØµØ© Ù…Ø­Ø¨ÙŠ Ø§Ù„Ø¹Ø·ÙˆØ± - Ø§ÙƒØªØ´Ù Ø¹Ø·Ø±Ùƒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h6>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h6>
                    <ul class="list-unstyled">
                        <li><a href="{{ url_for('scent_dna.form') }}" class="footer-link">Ø­Ù…Ø¶Ùƒ Ø§Ù„Ø¹Ø·Ø±ÙŠ</a></li>
                        <li><a href="{{ url_for('custom_perfume.form') }}" class="footer-link">ØµÙ…Ù‘Ù… Ø¹Ø·Ø±Ùƒ</a></li>
                        <li><a href="{{ url_for('recommendations.index') }}" class="footer-link">ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø¹Ø·ÙˆØ±</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-3">
                    <h6>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h6>
                    <p class="footer-text">
                        <i class="bi bi-envelope"></i> info@perlov.ai
                    </p>
                </div>
            </div>
            <hr class="footer-divider">
            <p class="text-center footer-copyright">&copy; 2024 PERLOV - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function showLoading(btn) {
            btn.disabled = true;
            btn.dataset.originalText = btn.innerHTML;
            btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status"></span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...';
        }
        function hideLoading(btn) {
            btn.disabled = false;
            btn.innerHTML = btn.dataset.originalText;
        }
        function showSuccess(message = 'ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!') {
            Swal.fire({
                icon: 'success',
                title: 'Ù†Ø¬Ø§Ø­!',
                text: message,
                confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
                confirmButtonColor: '#0B2E8A',
                timer: 2000,
                timerProgressBar: true
            });
        }
        function showError(message = 'Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰') {
            Swal.fire({
                icon: 'error',
                title: 'Ø®Ø·Ø£!',
                text: message,
                confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
                confirmButtonColor: '#0B2E8A'
            });
        }

        // Language Switching
        const translations = {
            ar: { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', dir: 'rtl', label: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },
            en: { name: 'English', dir: 'ltr', label: 'English' },
            hi: { name: 'à¤¹à¤¿à¤‚à¤¦à¥€', dir: 'ltr', label: 'à¤¹à¤¿à¤‚à¤¦à¥€' },
            fa: { name: 'ÙØ§Ø±Ø³ÛŒ', dir: 'rtl', label: 'ÙØ§Ø±Ø³ÛŒ' }
        };

        function changeLanguage(lang) {
            const config = translations[lang];
            if (!config) return;
            
            // Update document
            document.documentElement.lang = lang;
            document.documentElement.dir = config.dir;
            
            // Update current language display
            document.getElementById('current-lang').textContent = config.label;
            
            // Save to localStorage
            localStorage.setItem('perlov-language', lang);
            
            // Show notification
            Swal.fire({
                icon: 'info',
                title: 'ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©',
                text: `ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ø¥Ù„Ù‰ ${config.name}`,
                confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
                confirmButtonColor: '#0B2E8A',
                timer: 1500,
                timerProgressBar: true
            });
        }

        // Load saved language on page load
        window.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('perlov-language') || 'ar';
            if (savedLang !== 'ar') {
                changeLanguage(savedLang);
            }
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
